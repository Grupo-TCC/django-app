{% extends "base.html" %}
{% load static %}
{% block title %}Artigos Científicos{% endblock %}
{% block content %}
    <h2>Publique Seus Artigos</h2>
    <div class="artigos-header">
      <form method="get" class="search-box search-form" style="flex:1;">
        <input type="text" id="search-input" name="q" placeholder="Pesquisar por pesquisador, título ou área" value="{{ search_query|default:'' }}" class="search-bar" />
        <button type="submit" class="search-btn">Buscar</button>
      </form>
      <button id="add-article-btn" class="plus-btn" title="Adicionar artigo">
        <span>+</span>
      </button>
      <a href="{% url 'feed:home' %}" class="home-btn">Home</a>
    </div>
    <div id="article-modal" class="modal" style="display:none;">
      <div class="modal-content">
        <span class="close-modal" id="close-article-modal">&times;</span>
        <form method="POST" enctype="multipart/form-data" id="article-upload-form">
          {% csrf_token %}
          {% if form.non_field_errors %}
            <div class="form-errors">
              {{ form.non_field_errors }}
            </div>
          {% endif %}
          {{ form.as_p }}
          <button type="submit">Publicar</button>
        </form>
      </div>
    </div>
    <div class="articles-list">
      {% for article in articles %}
        <div class="article-card searchable">
          <div class="article-title">{{ article.title }}</div>
          <small class="article-meta">
            {{ article.user.fullname }} &middot; {{ article.research_area }}
          </small>
          <a href="{{ article.pdf.url }}" target="_blank" class="article-link">Ver PDF</a>
        </div>
      {% empty %}
        <p>Nenhum artigo publicado ainda.</p>
      {% endfor %}
    </div>
{% endblock %}
{% block extra_head %}
<link rel="stylesheet" href="{% static 'styles/artigos.css' %}" />
{% endblock %}
{% block extra_js %}
<script src="{% static 'js/artigos.js' %}"></script>
<script src="{% static 'js/search.js' %}"></script>
{% endblock %}